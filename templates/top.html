<link rel="stylesheet" href="/styles/top.css" />

<div id="map">
  <img id="world" src="/images/map_red.png">

  {% for city in cities %} 
  <div id="{{city.id}}" class="pin-container">
    <a alt="{{city.label}}" {% if city.id == "tokyo" %}href="/{{lang}}/test_city_tokyo"{% else %}href="/{{lang}}/cities/{{city.id}}"{% endif %}>
      <div class="pin">
        <div class="point">
          <img src="/images/cities/{{city.id}}_white.png">
          <div class="city">
            <span>{{city.label}}</span>
          </div>
        </div>
        <div class="bar"></div>
      </div>
    </a>
  </div>
  {% endfor %}
  <div id="vehicles">
    <div id="ufo" class="vehicle">
      <div class="balloon">
        <p>{% if lang == 'en' %}Welcome to the World in Twelve!!{% else %}”World
        in Twelve”へようこそ！{% endif %}</p>
      </div>
      <img src="/images/vehicles/ufo.png">
    </div>
    <div id="ship" class="vehicle">
      <div class="balloon">
        <p><a href="https://www.facebook.com/worldintwelve"
        target="_blank"><span id="facebooklikes">Check</span></a></p>
        <p>Facebook Page</p>
        
      </div>
      <img src="/images/vehicles/ship.png">
    </div>
    <div id="plane" class="vehicle">
      <div class="balloon">
        <p>
        {% if lang == 'ja' %}Leo は東京にいます!
        {% else %}Leo is now in Tokyo!{% endif %}
        </p>
      </div>
      <img src="/images/vehicles/plane.png">
    </div>
    <div id="submarine" class="vehicle">
      <div class="balloon">
        {% if lang == 'en' %}
        <p>Check out the 12 Qs <a href="/en/twelve_questions/sanfrancisco">Here</a>!!</p>
        {% else %}
        <p>12の質問は<a href="/ja/twelve_questions/sanfrancisco">こちら</a>！</p>
        {% endif %}
      </div>
      <img src="/images/vehicles/submarine.png">
      <img id="wave" src="/images/vehicles/wave.png">
    </div>
  </div>
</div>
<script>
  var cities_ = "{% for city in cities %}_{{city.id}}{% endfor %}";
  var cities = cities_.split("_").slice(1);
  var i = 0;
  setInterval(function() {
    var element = document.getElementById(cities[i]);
    element.classList.add('selected');
    setTimeout(function() {
      element.classList.remove('selected');
    }, 2000);
    i = (i == cities.length - 1) ? 0 : i + 1;
  }, 5000);

  var facebookCallback = function(data) {
    //var span = document.getElementById('facebooklikes');
    //span.innerHTML = data.likes;
  };

  var days = document.getElementById('days');
  days.innerHTML = parseInt(((new Date()).getTime() - 1420038000000) / (24*60*60*1000));
</script>
<script src="http://graph.facebook.com/worldintwelve/?callback=facebookCallback"></script>
